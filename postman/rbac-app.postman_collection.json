{
  "info": {
    "_postman_id": "47a91cb8-0f3e-4452-bf4d-02ab7d0eb001",
    "name": "RBAC App API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Admin Signup Status",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/auth/admin-signup-status"
          }
        },
        {
          "name": "Admin Signup (First Time)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"{{admin_name}}\",\n  \"email\": \"{{admin_email}}\",\n  \"phone\": \"{{admin_phone}}\",\n  \"password\": \"{{admin_password}}\"\n}"
            },
            "url": "{{baseUrl}}/auth/admin-signup"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.environment.set('accessToken', json?.data?.accessToken || '');",
                  "pm.environment.set('userId', json?.data?.user?._id || '');"
                ]
              }
            }
          ]
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{admin_email}}\",\n  \"password\": \"{{admin_password}}\"\n}"
            },
            "url": "{{baseUrl}}/auth/login"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.environment.set('accessToken', json?.data?.accessToken || '');",
                  "pm.environment.set('userId', json?.data?.user?._id || '');"
                ]
              }
            }
          ]
        },
        {
          "name": "Refresh",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/auth/refresh"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.environment.set('accessToken', json?.data?.accessToken || pm.environment.get('accessToken') || '');"
                ]
              }
            }
          ]
        },
        {
          "name": "Me",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": "{{baseUrl}}/auth/me"
          }
        },
        {
          "name": "Force Logout User Sessions",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": "{{baseUrl}}/auth/force-logout/{{userId}}"
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": "{{baseUrl}}/auth/logout"
          }
        }
      ]
    },
    {
      "name": "Dashboard",
      "item": [
        {
          "name": "Summary",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" },
              { "key": "x-app-context", "value": "{{appContext}}" }
            ],
            "url": "{{baseUrl}}/dashboard/summary"
          }
        }
      ]
    },
    {
      "name": "Permissions",
      "item": [
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": "{{baseUrl}}/permissions"
          }
        }
      ]
    },
    {
      "name": "Roles",
      "item": [
        {
          "name": "Create",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Manager\",\n  \"description\": \"Manager role\",\n  \"permissionKeys\": [\"dashboard:view\", \"categories:view\", \"categories:create\"]\n}"
            },
            "url": "{{baseUrl}}/roles"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.environment.set('roleId', json?.data?._id || '');"
                ]
              }
            }
          ]
        },
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": "{{baseUrl}}/roles?page={{page}}&limit={{limit}}&search={{search}}&sortBy={{sortBy}}&sortOrder={{sortOrder}}"
          }
        },
        {
          "name": "Update",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"Updated manager role\",\n  \"permissionKeys\": [\"dashboard:view\", \"categories:view\", \"categories:create\", \"categories:update\"]\n}"
            },
            "url": "{{baseUrl}}/roles/{{roleId}}"
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": "{{baseUrl}}/roles/{{roleId}}"
          }
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "Create",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"User One\",\n  \"email\": \"user1@example.com\",\n  \"phone\": \"9876543210\",\n  \"password\": \"Password@123\",\n  \"roleIds\": [\"{{roleId}}\"]\n}"
            },
            "url": "{{baseUrl}}/users"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.environment.set('userId', json?.data?._id || '');"
                ]
              }
            }
          ]
        },
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": "{{baseUrl}}/users?page={{page}}&limit={{limit}}&search={{search}}&sortBy={{sortBy}}&sortOrder={{sortOrder}}"
          }
        },
        {
          "name": "Update",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"User One Updated\",\n  \"phone\": \"9876543211\",\n  \"isActive\": true\n}"
            },
            "url": "{{baseUrl}}/users/{{userId}}"
          }
        },
        {
          "name": "Assign Single Role",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"roleIds\": [\"{{roleId}}\"]\n}"
            },
            "url": "{{baseUrl}}/users/{{userId}}/roles"
          }
        }
      ]
    },
    {
      "name": "Categories",
      "item": [
        {
          "name": "Create",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Electronics\",\n  \"description\": \"Devices\",\n  \"isActive\": true\n}"
            },
            "url": "{{baseUrl}}/categories"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.environment.set('categoryId', json?.data?._id || '');"
                ]
              }
            }
          ]
        },
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": "{{baseUrl}}/categories?page={{page}}&limit={{limit}}&search={{search}}&sortBy={{sortBy}}&sortOrder={{sortOrder}}"
          }
        },
        {
          "name": "Update",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"Updated description\",\n  \"isActive\": true\n}"
            },
            "url": "{{baseUrl}}/categories/{{categoryId}}"
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": "{{baseUrl}}/categories/{{categoryId}}"
          }
        }
      ]
    },
    {
      "name": "Shelves",
      "item": [
        {
          "name": "Create",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"A-1\",\n  \"name\": \"Shelf A\",\n  \"locationNote\": \"Near gate\",\n  \"isActive\": true\n}"
            },
            "url": "{{baseUrl}}/shelves"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.environment.set('shelfId', json?.data?._id || '');"
                ]
              }
            }
          ]
        },
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": "{{baseUrl}}/shelves?page={{page}}&limit={{limit}}&search={{search}}&sortBy={{sortBy}}&sortOrder={{sortOrder}}"
          }
        },
        {
          "name": "Update",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Shelf A Updated\",\n  \"locationNote\": \"Second aisle\",\n  \"isActive\": true\n}"
            },
            "url": "{{baseUrl}}/shelves/{{shelfId}}"
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": "{{baseUrl}}/shelves/{{shelfId}}"
          }
        }
      ]
    },
    {
      "name": "Products",
      "item": [
        {
          "name": "Create",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sku\": \"SKU-100\",\n  \"name\": \"Phone\",\n  \"categoryId\": \"{{categoryId}}\",\n  \"price\": 12000,\n  \"stock\": 5,\n  \"shelfId\": \"{{shelfId}}\",\n  \"isActive\": true\n}"
            },
            "url": "{{baseUrl}}/products"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.environment.set('productId', json?.data?._id || '');"
                ]
              }
            }
          ]
        },
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": "{{baseUrl}}/products?page={{page}}&limit={{limit}}&search={{search}}&sortBy={{sortBy}}&sortOrder={{sortOrder}}"
          }
        },
        {
          "name": "Update",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Phone Updated\",\n  \"price\": 13000,\n  \"stock\": 9,\n  \"categoryId\": \"{{categoryId}}\",\n  \"shelfId\": \"{{shelfId}}\",\n  \"isActive\": true\n}"
            },
            "url": "{{baseUrl}}/products/{{productId}}"
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": "{{baseUrl}}/products/{{productId}}"
          }
        }
      ]
    },
    {
      "name": "Customers",
      "item": [
        {
          "name": "Create",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Customer One\",\n  \"phone\": \"9999999999\",\n  \"email\": \"customer@example.com\",\n  \"address\": \"Delhi\",\n  \"isActive\": true\n}"
            },
            "url": "{{baseUrl}}/customers"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.environment.set('customerId', json?.data?._id || '');"
                ]
              }
            }
          ]
        },
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": "{{baseUrl}}/customers?page={{page}}&limit={{limit}}&search={{search}}&sortBy={{sortBy}}&sortOrder={{sortOrder}}"
          }
        },
        {
          "name": "Update",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Customer One Updated\",\n  \"phone\": \"9999999998\",\n  \"email\": \"customer.updated@example.com\",\n  \"address\": \"Noida\",\n  \"isActive\": true\n}"
            },
            "url": "{{baseUrl}}/customers/{{customerId}}"
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": "{{baseUrl}}/customers/{{customerId}}"
          }
        }
      ]
    },
    {
      "name": "Audit Logs",
      "item": [
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": "{{baseUrl}}/audit-logs?page={{page}}&limit={{limit}}&search={{search}}&sortBy={{sortBy}}&sortOrder={{sortOrder}}"
          }
        }
      ]
    }
  ]
}
